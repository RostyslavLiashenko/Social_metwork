(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{111:function(e,t,n){e.exports={formControl:"FormControls_formControl__1Url4",block:"FormControls_block__gtCLJ",error:"FormControls_error__2-Vzq"}},12:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__2Fln4",nav:"Sidebar_nav__2Mg-B",item:"Sidebar_item__2FoCB",itemContainer:"Sidebar_itemContainer__36B5o",active:"Sidebar_active__1Gi4H",sidebarIcon:"Sidebar_sidebarIcon__2xXcQ"}},135:function(e,t,n){e.exports={pagination:"pagination_pagination__3e3lM",selectedPage:"pagination_selectedPage__20x4_"}},139:function(e,t,n){e.exports={main:"NotFound_main__1Lkht",fof:"NotFound_fof__2-02o",type:"NotFound_type__14M5N"}},140:function(e,t,n){"use strict";var r=n(6),a=n(65),c=n(66),s=n(75),i=n(74),o=n(0),u=n.n(o),l=n(14),d=n(25),b=n(1),j=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){var t=function(t){Object(s.a)(o,t);var n=Object(i.a)(o);function o(){return Object(a.a)(this,o),n.apply(this,arguments)}return Object(c.a)(o,[{key:"render",value:function(){return this.props.isAuth?Object(b.jsx)(e,Object(r.a)({},this.props)):Object(b.jsx)(l.a,{to:"/login"})}}]),o}(u.a.Component);return Object(d.b)(j)(t)}},172:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(6),a=n(40),c=n(29),s="SEND_MESSAGE",i="DELETE_MESSAGE",o={usersData:[{name:"Evgen",id:1,photo:c.a,messages:["Hello","How are you ?"]},{name:"Valera",id:2,photo:c.a,messages:["Hi","What are you doing ?","Nothing, just chill out"]},{name:"Mario",id:3,photo:c.a,messages:["What's up ?"]},{name:"Dasha",id:4,photo:c.a,messages:["Happy birthday","It's the best day","I'm exiting to meeting"]},{name:"Katya",id:5,photo:c.a,messages:["How is it going ???"]},{name:"Pasha",id:6,photo:c.a,messages:[]}]},u=function(e,t){return{type:s,messageBody:e,userId:t}},l=function(e,t){return{type:i,numMsg:e,userId:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n=[].concat(Object(a.a)(e.usersData[t.userId-1].messages),[t.messageBody]),c=e.usersData.map((function(e){return e.id===t.userId?Object(r.a)(Object(r.a)({},e),{},{messages:n}):e}));return Object(r.a)(Object(r.a)({},e),{},{usersData:c});case i:return e.usersData[t.userId-1].messages.splice(t.numMsg,1),Object(r.a)(Object(r.a)({},e),{},{usersData:Object(a.a)(e.usersData)});default:return e}}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(48),a=n(0),c=n(36),s=n.n(c),i=n(21),o=n(72),u=n(132),l=n(173),d=n(390),b=n(186),j=n.n(b),f=n(1),m=Object(l.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.user,r=e.error;return Object(f.jsxs)("form",{onSubmit:t,className:s.a.aboutMe,children:[r&&Object(f.jsx)("p",{className:s.a.formSummaryError,children:r}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"Full name:"}),Object(i.a)(i.c,[o.c],{name:"fullName",type:"text",placeholder:"type your name"})]}),Object(f.jsx)("div",{className:s.a.checkBox,children:Object(f.jsx)(u.a,{style:{fontSize:".9em"},name:"lookingForAJob",label:"looking for a job",component:i.b})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"About me:"}),Object(i.a)(i.c,[],{name:"aboutMe",type:"text",placeholder:"about me"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{children:"Looking for a job description:"}),Object(i.a)(i.c,[],{name:"lookingForAJobDescription",type:"text",placeholder:"description"})]}),Object.keys(n.contacts).map((function(e){return Object(f.jsxs)("div",{className:s.a.contact,children:[Object(f.jsxs)("span",{children:[e,":"]}),Object(i.a)(i.c,[],{name:"contacts.".concat(e),type:"text",placeholder:"".concat(e)})]},e)})),Object(f.jsx)("div",{children:Object(f.jsx)(d.a,{variant:"contained",style:{textTransform:"lowercase",backgroundColor:"#2b3120",color:"#fff",fontSize:".95em",margin:"10px auto"},type:"submit",startIcon:Object(f.jsx)(j.a,{}),children:"save"})})]})})),h=n(14),p=function(e){var t=e.user,n=e.goToEditMode,a=e.path,c=Object.entries(t.contacts).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(f.jsxs)("div",{className:s.a.contact,children:[Object(f.jsxs)("b",{children:[n,":"]})," ",a]},n)}));return Object(f.jsxs)("div",{className:s.a.infoBlock,children:[Object(f.jsxs)("div",{className:s.a.mainInfo,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Name: "}),t.fullName]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"I'm looking for a new job: "}),t.lookingForAJob?"yes":"no"]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"About me: "}),t.aboutMe]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Looking for a job description: "}),t.lookingForAJobDescription]})]}),Object(f.jsxs)("div",{className:s.a.contacts,children:[Object(f.jsx)("span",{children:"Contacts:"}),c]}),16749===t.userId&&"/settings"===a&&Object(f.jsx)("div",{style:{textAlign:"center"},children:Object(f.jsx)(d.a,{style:{color:"#fff",textTransform:"lowercase",backgroundColor:"#2b3120",padding:"5px 20px",margin:"10px auto",fontSize:"1em"},variant:"contained",onClick:n,children:"edit"})})]})};t.b=function(e){var t=e.user,n=e.saveProfile,c=e.path,i=Object(a.useState)(!1),o=Object(r.a)(i,2),u=o[0],l=o[1];if(!t)return Object(f.jsx)(h.a,{to:"/profile"});return Object(f.jsxs)("div",{className:s.a.settingsBlock,children:[Object(f.jsx)("div",{className:s.a.settings,children:"Settings"}),u?Object(f.jsx)(m,{initialValues:t,user:t,onSubmit:function(e){n(e).then((function(){l(!1)}))}}):Object(f.jsx)(p,{user:t,path:c,goToEditMode:function(){return l(!0)}})]})}},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var r=n(6),a=n(187),c=(n(0),n(111)),s=n.n(c),i=n(132),o=n(354),u=n(357),l=n(356),d=n(1),b=function(e){var t=e.meta,n=t.touched,r=t.error,a=e.children,c=n&&r;return Object(d.jsxs)("div",{className:s.a.block,children:[Object(d.jsx)("div",{className:c?s.a.formControl:"",children:a}),c&&Object(d.jsx)("div",{className:s.a.error,children:r})]})},j=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return Object(d.jsx)(b,Object(r.a)(Object(r.a)({},e),{},{children:Object(d.jsx)(o.a,Object(r.a)(Object(r.a)({style:Object(r.a)({marginBottom:"10px"},t.style)},t),n))}))},f=function(e){var t=e.input,n=e.label;return Object(d.jsx)("div",{children:Object(d.jsx)(u.a,{control:Object(d.jsx)(l.a,{checked:!!t.value,onChange:t.onChange,style:t.style}),label:n})})},m=function(e,t,n){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(i.a,Object(r.a)({component:e,validate:t},n))})}},221:function(e,t,n){},226:function(e,t,n){},26:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(177),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4e536f42-e2a1-4856-99e0-638b4ee81dad"}}),c={getUsers:function(e,t){return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))}},s={getProfile:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e))},updateStatus:function(e){return a.put("profile/status",{status:e})},setPhoto:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},setProfileData:function(e){return a.put("profile",e)}},i={getUserAuth:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")}},o={getCaptchaUrl:function(){return a.get("security/get-captcha-url")}}},29:function(e,t,n){"use strict";t.a=n.p+"static/media/userPhoto.42fa9e28.jpg"},33:function(e,t,n){e.exports={header:"Header_header__26EkA",stickyHeader:"Header_stickyHeader__3Er0D",authBlock:"Header_authBlock__35g-b",name:"Header_name__2_W7q",buttons:"Header_buttons__8qqZ6",container:"Header_container___c7J-",btn:"Header_btn__3rrio",effect01:"Header_effect01__1C-tt",btnLogin:"Header_btnLogin__1lNiF"}},352:function(e,t,n){"use strict";n.r(t);n(221);var r=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,402)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},a=n(0),c=n.n(a),s=n(17),i=n.n(s),o=n(65),u=n(66),l=n(75),d=n(74),b=(n(226),n(12)),j=n.n(b),f=n(20),m=n(29),h=n.p+"static/media/email.3585396a.jpg",p=n.p+"static/media/users.a662bdcb.png",O=n.p+"static/media/news.5f04c433.png",g=n.p+"static/media/music.0d195aec.png",x=n.p+"static/media/settings.6dba9d0f.png",v=n(48),_=function(){var e=Object(a.useState)({width:void 0,height:void 0}),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},w=n(1),P=function(e){var t=e.activeUrl,n=_().width;return Object(w.jsx)(a.Fragment,{children:n>=450&&Object(w.jsx)("div",{className:j.a.sidebar,children:Object(w.jsxs)("nav",{className:j.a.nav,children:[Object(w.jsx)(f.b,{className:"/profile"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/profile",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:m.a,alt:"profile"}),Object(w.jsx)("span",{children:"Profile"})]})}),Object(w.jsx)(f.b,{className:"/dialogs"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/dialogs",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:h,alt:"messages"}),Object(w.jsx)("span",{children:"Messages"})]})}),Object(w.jsx)(f.b,{className:"/users"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/users",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:p,alt:"users"}),Object(w.jsx)("span",{children:"Users"})]})}),Object(w.jsx)(f.b,{className:"/news"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/news",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:O,alt:"news"}),Object(w.jsx)("span",{children:"News"})]})}),Object(w.jsx)(f.b,{className:"/music"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/music",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:g,alt:"music"}),Object(w.jsx)("span",{children:"Music"})]})}),Object(w.jsx)(f.b,{className:"/settings"===t?"".concat(j.a.item," ").concat(j.a.active):"".concat(j.a.item),to:"/settings",children:Object(w.jsxs)("div",{className:j.a.itemContainer,children:[Object(w.jsx)("img",{className:j.a.sidebarIcon,src:x,alt:"settings"}),Object(w.jsx)("span",{children:"Settings"})]})})]})})})},y=n(14),k=Object(y.g)((function(e){var t=e.history.location.pathname;return Object(w.jsx)(P,{activeUrl:t})})),N=n(25),C=n(19),S=n.n(C),I=n(30),E=n(40),F=n(6),M=n(26),A=function(e,t,n){return Object(F.a)(Object(F.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(F.a)(Object(F.a)({},e),n):e}))})},U="FOLLOW",D="UNFOLLOW",T="SET_USERS",z="SET_CURRENT_PAGE",L="SET_TOTAL_USERS_COUNT",B="TOGGLE_IS_FETCHING",H="TOGGLE_IN_PROGRESS",R={users:[],itemsPerPage:10,totalItemsCount:0,currentPage:1,isFetching:!1,followingInProgress:[],portionSize:10},G=function(e){return{type:U,userID:e}},W=function(e){return{type:D,userID:e}},J=function(e){return{type:z,currentPage:e}},q=function(e){return{type:B,isFetching:e}},V=function(e,t){return{type:H,isFollowing:e,userId:t}},X=function(){var e=Object(I.a)(S.a.mark((function e(t,n,r,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:0===e.sent.resultCode&&a(r(t)),a(V(!1,t));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return A(e,t,{followed:!0});case D:return A(e,t,{followed:!1});case T:return Object(F.a)(Object(F.a)({},e),{},{users:t.users});case z:return Object(F.a)(Object(F.a)({},e),{},{currentPage:t.currentPage});case L:return Object(F.a)(Object(F.a)({},e),{},{totalItemsCount:t.totalCount});case B:return Object(F.a)(Object(F.a)({},e),{},{isFetching:t.isFetching});case H:return Object(F.a)(Object(F.a)({},e),{},{followingInProgress:t.isFollowing?[].concat(Object(E.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},K=n(135),Z=n.n(K),Q=n(388),$=n(390),ee=n(181),te=n.n(ee),ne=n(182),re=n.n(ne),ae=n(385),ce=Object(ae.a)({root:{background:"#2b3120",color:"#fff",borderRadius:"4px",maxHeight:"36px",maxWidth:"40px",margin:"0 5px",transition:".2s ease-in-out","&:hover":{color:"#2b3120",background:"#fff"}}}),se=function(e){var t=e.totalItemsCount,n=e.itemsPerPage,r=e.onPageChange,c=e.currentPage,s=e.portionSize,i=ce(),o=_().width;o<=850&&(s=5),o<=450&&(s=4);for(var u=Math.ceil(t/n),l=[],d=1;d<=u;d++)l.push(d);var b=Math.ceil(u/s),j=Object(a.useState)(1),f=Object(v.a)(j,2),m=f[0],h=f[1],p=(m-1)*s+1,O=m*s;return Object(w.jsxs)("div",{className:Z.a.pagination,children:[Object(w.jsx)(Q.a,{className:i.root,disabled:m<=1,onClick:function(){return h(m-1)},children:Object(w.jsx)(te.a,{fontSize:"small"})}),l.filter((function(e){return e>=p&&e<=O})).map((function(e){return Object(w.jsx)($.a,{style:{background:"#fff",fontWeight:"600",margin:"0 3px",minWidth:"42px"},onClick:function(){return r(e)},className:c===e?Z.a.selectedPage:"",children:e},e)})),Object(w.jsx)(Q.a,{className:i.root,disabled:m>b,onClick:function(){return h(m+1)},children:Object(w.jsx)(re.a,{fontSize:"small"})})]})},ie=n(46),oe=n.n(ie),ue=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unfollow;return Object(w.jsxs)("div",{className:oe.a.user,children:[Object(w.jsx)("div",{children:Object(w.jsx)(f.b,{to:"/profile/".concat(t.id),children:Object(w.jsx)("img",{src:t.photos.small?t.photos.small:m.a,className:oe.a.avatar,alt:"ava"})})}),t.followed?Object(w.jsx)("button",{className:"".concat(oe.a.btn," ").concat(oe.a.effect01),disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)},children:Object(w.jsx)("span",{children:"unfollow"})}):Object(w.jsx)("button",{className:"".concat(oe.a.btn," ").concat(oe.a.effect01),disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:Object(w.jsx)("span",{children:"follow"})}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("div",{className:oe.a.name,children:[Object(w.jsx)("b",{children:"Name: "}),Object(w.jsx)("span",{children:t.name})]}),t.status&&Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"Status: "}),t.status]})]})]},t.id)},le=function(e){return Object(w.jsxs)("div",{className:oe.a.usersContainer,children:[Object(w.jsx)(se,{totalItemsCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,currentPage:e.currentPage,onPageChange:e.onPageChange,portionSize:e.portionSize}),e.users.map((function(t){return Object(w.jsx)(ue,{user:t,followingInProgress:e.followingInProgress,follow:e.follow,unfollow:e.unfollow},t.id)}))]})},de=n(71),be=n(16),je=n(183),fe=function(e){return e.usersPage.users},me=(Object(je.a)(fe,(function(e){return e.filter((function(){return!0}))})),function(e){return e.usersPage.itemsPerPage}),he=function(e){return e.usersPage.totalItemsCount},pe=function(e){return e.usersPage.currentPage},Oe=function(e){return e.usersPage.isFetching},ge=function(e){return e.usersPage.followingInProgress},xe=function(e){return e.usersPage.portionSize},ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onPageChange=function(t){var n=e.props;(0,n.requestUsers)(t,n.itemsPerPage)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.requestUsers)(e.currentPage,e.itemsPerPage)}},{key:"render",value:function(){return Object(w.jsxs)(w.Fragment,{children:[this.props.isFetching&&Object(w.jsx)(de.a,{}),Object(w.jsx)(le,{totalItemsCount:this.props.totalItemsCount,itemsPerPage:this.props.itemsPerPage,onPageChange:this.onPageChange,currentPage:this.props.currentPage,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,portionSize:this.props.portionSize})]})}}]),n}(c.a.Component),_e=Object(be.d)(Object(N.b)((function(e){return{users:fe(e),itemsPerPage:me(e),totalItemsCount:he(e),currentPage:pe(e),isFetching:Oe(e),followingInProgress:ge(e),portionSize:xe(e)}}),{follow:function(e){return function(){var t=Object(I.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(V(!0,e)),t.next=3,X(e,M.d.follow.bind(M.d),G,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(I.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(V(!0,e)),t.next=3,X(e,M.d.unfollow.bind(M.d),W,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:J,toggleFollowingInProgress:V,requestUsers:function(e,t){return function(n){n(q(!0)),n(J(e)),M.d.getUsers(e,t).then((function(e){var t;n(q(!1)),n(function(e){return{type:T,users:e}}(e.items)),n((t=e.totalCount,{type:L,totalCount:t}))}))}}}))(ve),we=n(33),Pe=n.n(we),ye=n.p+"static/media/logo2.4446edea.png",ke=n(63),Ne=n.n(ke),Ce=function(e){var t=e.isOpenMenu,n=e.burgerClick;return Object(w.jsxs)("div",{className:t?"".concat(Ne.a.container," ").concat(Ne.a.change):"".concat(Ne.a.container),onClick:n,children:[Object(w.jsx)("div",{className:Ne.a.bar1}),Object(w.jsx)("div",{className:Ne.a.bar2}),Object(w.jsx)("div",{className:Ne.a.bar3})]})},Se=n(38),Ie=n.n(Se),Ee=function(e){var t=e.burgerClick,n=e.isOpenMenu;return Object(w.jsxs)("div",{className:n?Ie.a.menu:"".concat(Ie.a.hiddenMenu," ").concat(Ie.a.menu),onClick:t,children:[Object(w.jsx)("div",{className:Ie.a.blur}),Object(w.jsx)("div",{className:Ie.a.menuContent,onClick:function(e){return e.stopPropagation()},children:Object(w.jsxs)("div",{onClick:t,children:[Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/profile",children:"Profile"})}),Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/dialogs",children:"Messages"})}),Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/users",children:"Users"})}),Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/news",children:"News"})}),Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/music",children:"Music"})}),Object(w.jsx)("div",{className:Ie.a.item,children:Object(w.jsx)(f.b,{to:"/settings",children:"Settings"})})]})})]})},Fe=function(e){var t=_().width,n=Object(a.useState)(!1),r=Object(v.a)(n,2),c=r[0],s=r[1],i=function(){s(!c)};return Object(w.jsxs)("header",{className:t>=450?Pe.a.header:"".concat(Pe.a.header," ").concat(Pe.a.stickyHeader),children:[t>=450?Object(w.jsx)(f.b,{to:"/profile",children:Object(w.jsx)("img",{src:ye,alt:"logo",width:"140px"})}):Object(w.jsx)(Ce,{burgerClick:i,isOpenMenu:c}),Object(w.jsxs)("div",{className:Pe.a.loginBlock,children:[e.isFetching?Object(w.jsx)(de.a,{}):"",e.isAuth?Object(w.jsxs)("div",{className:Pe.a.authBlock,children:[Object(w.jsx)("div",{className:Pe.a.name,children:e.login}),Object(w.jsx)("div",{className:Pe.a.buttons,children:Object(w.jsx)("div",{className:Pe.a.container,children:Object(w.jsx)("button",{className:"".concat(Pe.a.btn," ").concat(Pe.a.effect01),onClick:e.logout,children:Object(w.jsx)("span",{children:"log out"})})})})]}):Object(w.jsx)(f.b,{className:"".concat(Pe.a.btnLogin," ").concat(Pe.a.effect01),to:"/login",children:Object(w.jsx)("span",{children:"login"})})]}),Object(w.jsx)(Ee,{isOpenMenu:c,burgerClick:i})]})},Me=n(51),Ae="auth/SET_USER_DATA",Ue="TOGGLE_FETCHING",De="SET_CAPTCHA_URL",Te={userId:null,email:null,login:null,isAuth:!1,isFetching:!1,captchaUrl:null},ze=function(e,t,n,r){return{type:Ae,payload:{userId:e,login:t,email:n,isAuth:r}}},Le=function(e){return{type:Ue,isFetching:e}},Be=function(e){return{type:De,payload:{captchaUrl:e}}},He=function(){return function(){var e=Object(I.a)(S.a.mark((function e(t){var n,r,a,c,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Le(!0)),e.next=3,M.a.getUserAuth();case 3:(n=e.sent)&&t(Le(!1)),0===n.resultCode&&(r=n.data,a=r.email,c=r.id,s=r.login,t(ze(c,s,a,!0)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Re=function(){return function(){var e=Object(I.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.c.getCaptchaUrl();case 2:n=e.sent,r=n.data.url,t(Be(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ae:case De:return Object(F.a)(Object(F.a)({},e),t.payload);case Ue:return Object(F.a)(Object(F.a)({},e),{},{isFetching:t.isFetching});default:return e}};var We=Object(N.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,isFetching:e.auth.isFetching}}),{logout:function(){return function(){var e=Object(I.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.rememberMe){e.next=5;break}return r=n().auth.email,t(ze(null,null,r,!1)),e.abrupt("return");case 5:return e.next=7,M.a.logout();case 7:if(0!==e.sent.data.resultCode){e.next=10;break}return e.abrupt("return",t(ze(null,null,null,!1)));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})((function(e){return Object(w.jsx)(Fe,Object(F.a)({},e))})),Je=n(173),qe=n(21),Ve=n(72),Xe=n(49),Ye=n.n(Xe),Ke=Object(Je.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(w.jsxs)("form",{onSubmit:t,className:Ye.a.formContainer,children:[Object(w.jsxs)("div",{className:Ye.a.inputBlock,children:[Object(w.jsx)("div",{className:Ye.a.email,children:"Email: "}),Object(qe.a)(qe.c,[Ve.c],{style:{backgroundColor:"#fff",margin:"10px"},fullWidth:!0,size:"small",name:"email",variant:"outlined",type:"email",placeholder:"email"})]}),Object(w.jsxs)("div",{className:Ye.a.inputBlock,children:[Object(w.jsx)("div",{className:Ye.a.password,children:"Password: "}),Object(qe.a)(qe.c,[Ve.c],{style:{backgroundColor:"#fff",margin:"10px"},fullWidth:!0,size:"small",name:"password",variant:"outlined",type:"password",placeholder:"password"})]}),Object(w.jsx)("div",{className:Ye.a.rememberBlock,children:Object(qe.a)(qe.b,[],{name:"rememberMe",label:"Remember"})}),r&&Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{src:r,alt:"captcha"}),Object(w.jsx)("div",{children:Object(qe.a)(qe.c,[Ve.c],{name:"captcha",type:"text",placeholder:"symbols from image"})})]}),n&&Object(w.jsx)("p",{className:Ye.a.formSummaryError,children:n}),Object(w.jsx)("div",{children:Object(w.jsx)($.a,{style:{color:"#fff",padding:"7px 20px",margin:"5px",backgroundColor:"#2b3120"},type:"submit",children:"login"})})]})})),Ze=Object(N.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl,user:{email:e.auth.email,password:localStorage.password,rememberMe:!!localStorage.rememberMe}}}),{login:function(e,t,n,r){return function(){var a=Object(I.a)(S.a.mark((function a(c){var s,i;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M.a.login(e,t,n,r);case 2:if(0!==(s=a.sent).data.resultCode){a.next=9;break}return localStorage.removeItem("rememberMe"),localStorage.removeItem("password"),n&&(localStorage.setItem("rememberMe",n),localStorage.setItem("password",t)),c(He()),a.abrupt("return");case 9:10===s.data.resultCode&&c(Re()),i=s.data.messages?s.data.messages[0]:"Something went wrong",c(Object(Me.a)("login",{_error:i}));case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuth,r=e.user,a=e.captchaUrl;return n?Object(w.jsx)(y.a,{to:"/profile"}):Object(w.jsxs)("div",{className:Ye.a.wrapper,children:[Object(w.jsx)("h1",{children:"Login"}),Object(w.jsx)(Ke,{initialValues:r,captchaUrl:a,onSubmit:function(e){t(e.email,e.password,e.rememberMe,e.captcha)}})]})})),Qe="INITIALIZED_SUCCESS",$e={initialized:!1},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return Object(F.a)(Object(F.a)({},e),{},{initialized:!0});default:return e}},tt=n(73),nt=n(172),rt=n(185),at=n(174),ct=Object(be.c)({profilePage:tt.c,dialogsPage:nt.a,usersPage:Y,auth:Ge,app:et,form:at.a}),st=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||be.d,it=Object(be.e)(ct,st(Object(be.d)(Object(be.a)(rt.a))));window.store=it;var ot=it,ut=n(175),lt=n(140),dt=Object(be.d)(Object(N.b)((function(e){return{user:e.profilePage.user,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:tt.d,addPhoto:tt.a,saveProfile:tt.f}),lt.a,y.g)((function(e){return Object(w.jsx)(ut.b,Object(F.a)(Object(F.a)({},e),{},{path:e.history.location.pathname,user:e.user,saveProfile:e.saveProfile}))})),bt=n(139),jt=n.n(bt),ft=function(){return Object(w.jsx)("div",{className:"".concat(jt.a.main),children:Object(w.jsx)("div",{className:"".concat(jt.a.fof),children:Object(w.jsx)("h1",{children:"Error 404"})})})},mt=c.a.lazy((function(){return n.e(4).then(n.bind(null,404))})),ht=c.a.lazy((function(){return n.e(3).then(n.bind(null,403))})),pt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"catchAllUnHandleErrors",value:function(e){alert(e.reason),console.log(e.reason,e.promise)}},{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnHandleErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnHandleErrors)}},{key:"render",value:function(){return this.props.initialized?Object(w.jsxs)("div",{className:"app-wrapper",children:[Object(w.jsx)(We,{}),Object(w.jsx)(k,{}),Object(w.jsx)("div",{className:"app-wrapper-content",children:Object(w.jsx)(a.Suspense,{fallback:Object(w.jsx)("div",{children:"loading..."}),children:Object(w.jsxs)(y.d,{children:[Object(w.jsx)(y.b,{path:"/settings",component:dt}),Object(w.jsx)(y.b,{path:"/profile/:userId?",component:ht}),Object(w.jsx)(y.b,{path:"/dialogs",component:mt}),Object(w.jsx)(y.b,{path:"/users",component:_e}),Object(w.jsx)(y.b,{path:"/login",component:Ze}),Object(w.jsx)(y.b,{exact:!0,path:"/",children:Object(w.jsx)(y.a,{to:"/profile"})}),Object(w.jsx)(y.b,{path:"*",children:Object(w.jsx)(ft,{})})]})})})]}):Object(w.jsx)(de.a,{})}}]),n}(c.a.Component),Ot=Object(be.d)(y.g,Object(N.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(He());Promise.all([t]).then((function(){return e({type:Qe})}))}}}))(pt),gt=function(){return Object(w.jsx)(f.a,{children:Object(w.jsx)(N.a,{store:ot,children:Object(w.jsx)(Ot,{})})})};i.a.render(Object(w.jsx)(gt,{}),document.getElementById("root")),r()},36:function(e,t,n){e.exports={settingsBlock:"Settings_settingsBlock__2kyE4",aboutMe:"Settings_aboutMe__2rUh2",settings:"Settings_settings__22V4z",mainInfo:"Settings_mainInfo__1nMCj",formSummaryError:"Settings_formSummaryError__29-oC",contacts:"Settings_contacts__3t4Ye",contact:"Settings_contact__2PoJC",checkBox:"Settings_checkBox__1qT3x"}},38:function(e,t,n){e.exports={menu:"DropDownMenu_menu__2jvdU",hiddenMenu:"DropDownMenu_hiddenMenu__3bAA0",blur:"DropDownMenu_blur__NQgcb",menuContent:"DropDownMenu_menuContent__3xxSz",item:"DropDownMenu_item__1tPor"}},46:function(e,t,n){e.exports={usersContainer:"user_usersContainer__28esn",user:"user_user__xd5Xx",avatar:"user_avatar__3Zstu",name:"user_name__R5A5S",btn:"user_btn__2--VM",effect01:"user_effect01__2H0bB"}},49:function(e,t,n){e.exports={wrapper:"login_wrapper__2vL4z",formContainer:"login_formContainer__2zlk9",inputBlock:"login_inputBlock__3ahI3",email:"login_email__NP5un",password:"login_password__2huYo",formSummaryError:"login_formSummaryError__1aCUG",rememberBlock:"login_rememberBlock__65Fzl",boxes:"login_boxes__2W92z",loginBtn:"login_loginBtn__2cjjY"}},63:function(e,t,n){e.exports={container:"burgerIcon_container__cB7DV",bar1:"burgerIcon_bar1__1Cfsb",bar2:"burgerIcon_bar2__29ONa",bar3:"burgerIcon_bar3__2Ukly",change:"burgerIcon_change__iPCrN"}},71:function(e,t,n){"use strict";n(0);var r=n(1);t.a=function(){return Object(r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c7/Loading_2.gif",style:{maxWidth:"120px",borderRadius:"50%",position:"absolute",left:"40%",top:"50%"},alt:"loader"})}},72:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=function(e){if(!e)return"Field is required"},a=function(e){return function(t){if(!(t.length<=e))return"Field must include max ".concat(e," symbols")}},c=function(e){return function(t){if(!(t.length>=e))return"Field must include at least ".concat(e," symbols")}}},73:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"g",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return _})),n.d(t,"h",(function(){return w})),n.d(t,"a",(function(){return P})),n.d(t,"f",(function(){return y}));var r=n(19),a=n.n(r),c=n(30),s=n(40),i=n(6),o=n(26),u=n(29),l=n(51),d="ADD-POST",b="SET_USER_PROFILE",j="SET_STATUS",f="DELETE_USER",m="SET_PHOTO",h="TOGGLE_LIKES",p={userPosts:[{message:"It's my first post",likes:31,id:1,photo:u.a,liked:!1},{message:"Hi, how are you ?",likes:44,id:2,photo:u.a,liked:!1},{message:"Just another good day...",likes:38,id:3,photo:u.a,liked:!1}],user:null,status:""},O=function(e){return{type:d,newText:e}},g=function(e){return{type:h,postId:e}},x=function(e){return{type:j,status:e}},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getProfile(e);case 2:r=t.sent,n({type:b,user:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getStatus(e);case 2:r=t.sent,n(x(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(t){o.b.updateStatus(e).then((function(n){0===n.data.resultCode&&t(x(e))}))}},P=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.setPhoto(e);case 2:0===(r=t.sent).data.resultCode&&n((a=r.data.data.photos.large,{type:m,file:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r().auth.userId,t.next=3,o.b.setProfileData(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(v(c)),t.next=10;break;case 8:return n(Object(l.a)("edit-profile",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject(s.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)(Object(i.a)({},e),{},{userPosts:[].concat(Object(s.a)(e.userPosts),[{message:t.newText,likes:0,id:Math.trunc(100*Math.random()),photo:e.userPosts[0].photo}])});case b:var n=e.userPosts.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{photo:t.user.photos.small})}));return Object(i.a)(Object(i.a)({},e),{},{user:t.user,userPosts:Object(s.a)(n)});case j:return Object(i.a)(Object(i.a)({},e),{},{status:t.status});case f:return Object(i.a)(Object(i.a)({},e),{},{userPosts:Object(s.a)(e.userPosts).filter((function(e){return e.id!==t.postId}))});case m:var r=e.userPosts.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{photo:t.file})}));return Object(i.a)(Object(i.a)({},e),{},{user:Object(i.a)(Object(i.a)({},e.user),{},{photos:t.file}),userPosts:Object(s.a)(r)});case h:var a=e.userPosts.map((function(e){return e.id===t.postId?e.liked?Object(i.a)(Object(i.a)({},e),{},{likes:--e.likes,liked:!1}):Object(i.a)(Object(i.a)({},e),{},{likes:++e.likes,liked:!0}):e}));return Object(i.a)(Object(i.a)({},e),{},{userPosts:Object(s.a)(a)});default:return e}}}},[[352,1,2]]]);
//# sourceMappingURL=main.8610b72c.chunk.js.map